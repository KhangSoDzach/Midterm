// MongoDB Collection Structures
// This file describes the MongoDB collections equivalent to the original SQL tables

/*
=== Users Collection ===
{
  _id: ObjectId (auto-generated, replaces user_id)
  username: String (unique, max 50 chars)
  password: String (max 255 chars) 
  full_name: String (max 100 chars)
  phone_number: String (max 15 chars)
  email: String (unique, max 100 chars)
  address: String (max 255 chars, optional)
  available_balance: Number (default 0.00)
  createdAt: Date (auto-generated by timestamps)
  updatedAt: Date (auto-generated by timestamps)
}

=== Students Collection ===
{
  _id: ObjectId (auto-generated)
  student_id: String (unique, max 10 chars)
  full_name: String (max 100 chars)
  tuition_amount: Number
}

=== Transactions Collection ===
{
  _id: ObjectId (auto-generated, replaces transaction_id)
  user_id: ObjectId (references Users._id)
  student_id: String (max 10 chars)
  amount: Number
  transaction_date: Date (default Date.now)
  status: String (default 'PENDING', max 20 chars)
  otp: String (max 6 chars, optional)
  otp_expiry: Date (optional)
}

=== TransactionHistory Collection ===
{
  _id: ObjectId (auto-generated, replaces history_id)
  transaction_id: ObjectId (references Transactions._id)
  action: String (max 100 chars)
  performed_by: String (max 50 chars, optional)
  timestamp: Date (default Date.now)
}

=== Key Changes from SQL to MongoDB ===
1. IDENTITY(1,1) → ObjectId (auto-generated)
2. FOREIGN KEY → ObjectId references with populate()
3. DATETIME DEFAULT GETDATE() → Date with default Date.now
4. VARCHAR(n) → String with maxlength validation
5. DECIMAL(18,2) → Number
6. Automatic timestamps with createdAt/updatedAt
7. Embedded validation in Mongoose schemas
8. No need for explicit DROP/CREATE TABLE statements

=== Installation Instructions ===
1. Install MongoDB locally or use MongoDB Atlas
2. Run: npm install
3. Copy .env.example to .env and configure MONGODB_URI
4. Run: node backend/scripts/initMongoDB.js (to initialize sample data)
5. Run: npm run dev (to start the server)

=== Connection String Examples ===
Local MongoDB: mongodb://localhost:27017/ibanking_payment
MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/ibanking_payment
*/